<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Is it windy? ‚Äî Lethbridge</title>

<style>
body{
  margin:0;
  font-family:system-ui,Segoe UI,Arial;
  background:#0b1220;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  width:360px;
  background:#111a2e;
  padding:20px;
  border-radius:16px;
  text-align:center;
}
.gauge{
  position:relative;
  width:100%;
  height:180px;
}
.arc{
  width:100%;
  height:100%;
  border-radius:200px 200px 20px 20px;
  background:conic-gradient(from 180deg,#39ff88,#ffd84a,#ff3d5a);
  mask:radial-gradient(circle at 50% 100%,transparent 55%,black 56%);
}
.needle{
  position:absolute;
  bottom:15px;
  left:50%;
  width:4px;
  height:120px;
  background:white;
  transform-origin:50% 100%;
  transform:translateX(-50%) rotate(-90deg);
  transition:0.5s;
}
.hub{
  position:absolute;
  bottom:5px;
  left:50%;
  width:18px;
  height:18px;
  background:white;
  border-radius:50%;
  transform:translateX(-50%);
}
.big{font-size:40px;font-weight:700;}
</style>
</head>

<body>
<div class="card">
  <h2>Is it windy?</h2>
  <p>Lethbridge, Alberta üå¨Ô∏è</p>

  <div class="gauge">
    <div class="arc"></div>
    <div id="needle" class="needle"></div>
    <div class="hub"></div>
  </div>

  <div>
    <span id="speed" class="big">--</span> km/h
  </div>
  <p id="verdict">Loading‚Ä¶</p>
  <button onclick="refresh()">Refresh</button>
</div>

<script>
const API_KEY = "24ce85c259ed4cf4b80193635260402";
const MAX_KMH = 120;

function angleFromSpeed(kmh){
  return -90 + (Math.min(kmh,MAX_KMH)/MAX_KMH)*180;
}

function verdict(kmh){
  if(kmh<10) return "Not really";
  if(kmh<25) return "A little windy";
  if(kmh<45) return "Windy";
  if(kmh<70) return "Very windy";
  return "Unhinged Chinook üå™Ô∏è";
}

async function refresh(){
  const url = `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=Lethbridge,Canada&aqi=no`;
  const res = await fetch(url);
  const data = await res.json();

  const speed = data.current.wind_kph;

  document.getElementById("speed").textContent = Math.round(speed);
  document.getElementById("verdict").textContent = verdict(speed);
  document.getElementById("needle").style.transform =
    `translateX(-50%) rotate(${angleFromSpeed(speed)}deg)`;
}

refresh();
setInterval(refresh,60000);
</script>
</body>
</html>
